# Sprint_7: API-тестирование сервиса "Яндекс.Самокат" с Allure

В данном проекте выполнены автоматизированные тесты для проверки API Яндекс.Самоката с использованием pytest и генерации отчётов Allure.

* Тестирование CRUD для курьеров и заказов
* Allure-отчёты
* Тестирование критических сценариев API

## Тестовый проект для тестирования сервиса "Яндекс.Самокат"

Проект содержит автоматизированные тесты для проверки:

1. **Courier API**
   - Создание курьера
   - Логин курьера
   - Удаление курьера

2. **Orders API**
   - Создание заказа с разными вариантами цвета
   - Принятие заказа курьером
   - Получение списка заказов
   - Получение заказа по треку

---

## Краткая структура проекта

```
Sprint_7/
├── data/
│ ├── generator.py                  # Генерация данных для тестов
│ ├── test_data.py                  # Статичные данные для тестов
│ └── urls.py                       # URL эндпоинтов API
├── utils/
│ ├── api_client.py                 # Класс-обёртка для отправки запросов
│ └── courier_helpers.py            # Вспомогательные функции для работы с клиентами
├── target/
│ └── allure-results                # Отчёт Allure
├── tests/
│ ├── test_accept_order.py          # Тесты принятия заказов
│ ├── test_create_courier.py        # Тесты создания курьеров
│ ├── test_create_order.py          # Тесты оформления заказов
│ ├── test_delete_courier.py        # Тесты удаления курьеров
│ ├── test_get_order_by_track.py    # Тесты запроса заказа по номеру заказа 
│ ├── test_get_orders_list.py       # Тесты запроса списка заказов
│ └── test_login_courier.py         # Тесты авторизации курьера
├── conftest.py                     # Фикстуры pytest (создание/удаление курьеров)
├── pytest.ini                      # Конфигурация pytest для Allure
├── README.md
└── requirements.txt                # Зависимости
```


---

## Проверяемые сценарии
### 1. Courier API

`tests/test_create_courier.py`

* Создание курьера — успешный запрос

* Создание дубликата курьера — ошибка

* Создание курьера с пропущенными обязательными полями — ошибка

`tests/test_login_courier.py`

* Авторизация курьера — успешный запрос

* Неверный логин/пароль — ошибка

* Отсутствие обязательного поля login/password — ошибка

`tests/test_delete_courier.py`

* Удаление курьера по ID — успешный запрос

* Удаление курьера без ID — ошибка

* Удаление курьера с несуществующим ID — ошибка

### 2. Orders API

`tests/test_create_order.py`

* Создание заказа с разными вариантами цвета (`BLACK`, `GREY`, `BLACK+GREY`, `пустой`)

`tests/test_accept_order.py`

* Принятие заказа курьером — успешный запрос

* Принятие заказа без `courierId` — ошибка

* Принятие заказа с неверным `courierId` — ошибка

* Принятие заказа с неверным `orderId` — ошибка

`tests/test_get_orders_list.py`

* Получение списка всех заказов — успешный запрос, проверка структуры ответа

`tests/test_get_order_by_track.py`

* Получение заказа по треку (аналогично созданию заказа с проверкой структуры ответа)

---

## Генерация тестовых данных

- Все курьеры и заказы создаются динамически через `data/generator.py`.
- Логины курьеров уникальны благодаря добавлению случайной части UUID.
- Текст ошибочных ответов и остальные статичные данные указаны в `test_data.py`.

---

## Фикстуры

- `new_courier` (в `conftest.py`): создаёт нового курьера перед тестом и удаляет после выполнения.

---

## Как запустить тесты

1. Установить зависимости:
   ```bash
   pip install -r requirements.txt
   ```
2. Запустить тесты с генерацией Allure-отчёта:
   ```bash
    pytest --alluredir=target/allure-results
   ```
3. Просмотреть отчёт:
   ```bash
    allure serve target/allure-results 
   ```  
   
---

## Дополнительная информация

* Python 3.7+

* Тестовый стенд: https://qa-scooter.praktikum-services.ru/

* Документация API: https://qa-scooter.praktikum-services.ru/docs/#api-Courier-DeleteCourier
